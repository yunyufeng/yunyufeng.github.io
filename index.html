<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å·¥å…·å¯¼èˆª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            padding: 40px 20px;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .stats {
            display: inline-flex;
            gap: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 25px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .main-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .tools-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .tools-header h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .search-box {
            position: relative;
            max-width: 500px;
            margin: 0 auto 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-size: 1.2rem;
        }

        .category-filter {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .category-btn:hover, .category-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .tool-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .tool-card.featured {
            border-color: #ff6b6b;
            box-shadow: 0 8px 30px rgba(255, 107, 107, 0.3);
        }

        .tool-card.featured::before {
            content: "ğŸ”¥ çƒ­é—¨";
            position: absolute;
            top: 12px;
            right: 12px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
        }

        .tool-icon {
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            position: relative;
            overflow: hidden;
        }

        .tool-icon::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%);
        }

        .tool-info {
            padding: 20px;
        }

        .tool-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tool-name a {
            color: inherit;
            text-decoration: none;
            flex: 1;
        }

        .tool-name a:hover {
            color: #667eea;
        }

        .tool-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            min-height: 50px;
            font-size: 0.95rem;
        }

        .tool-features {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .feature-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .tool-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            flex: 1;
            padding: 10px 15px;
            text-align: center;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .refresh-btn {
            display: block;
            margin: 20px auto 0;
            padding: 10px 25px;
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .no-tools {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            grid-column: 1 / -1;
        }

        .no-tools-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .loading {
            text-align: center;
            padding: 40px;
            grid-column: 1 / -1;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status-message {
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .status-error {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .status-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .config-panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 0;
            margin-bottom: 20px;
            display: none;
        }

        .config-header {
            padding: 12px 20px;
            background: #f0f4ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e7ff;
        }

        .config-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .config-close {
            background: #667eea;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }

        .config-content {
            padding: 20px;
        }

        .config-form {
            display: grid;
            gap: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-weight: 600;
            color: #555;
            font-size: 0.9rem;
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.95rem;
        }

        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .config-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .config-actions button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }

        .save-config {
            background: #667eea;
            color: white;
        }

        .cancel-config {
            background: #f0f0f0;
            color: #666;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: white;
            opacity: 0.8;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .tools-header h2 {
                font-size: 1.6rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ› ï¸ åœ¨çº¿å·¥å…·é›†åˆ</h1>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalTools">0</div>
                    <div class="stat-label">å·¥å…·æ•°é‡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="htmlFiles">0</div>
                    <div class="stat-label">HTMLæ–‡ä»¶</div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- é…ç½®é¢æ¿ - é»˜è®¤éšè— -->
            <div class="config-panel" id="configPanel">
                <div class="config-header">
                    <div class="config-title">
                        <span>âš™ï¸</span> å·¥å…·é…ç½®
                    </div>
                    <button class="config-close" onclick="hideConfigPanel()">Ã—</button>
                </div>
                <div class="config-content">
                    <div class="config-form" id="configForm">
                        <!-- é…ç½®è¡¨å•å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <div class="tools-header">
                <h2>ğŸš€ å·¥å…·å¯¼èˆª</h2>
            </div>

            <div class="search-box">
                <div class="search-icon">ğŸ”</div>
                <input type="text" id="searchInput" placeholder="æœç´¢å·¥å…·åç§°..." oninput="searchTools()">
            </div>

            <div class="category-filter">
                <button class="category-btn active" onclick="filterTools('all')">å…¨éƒ¨å·¥å…·</button>
                <button class="category-btn" onclick="filterTools('popular')">çƒ­é—¨å·¥å…·</button>
                <button class="category-btn" onclick="filterTools('pdf')">PDFå·¥å…·</button>
                <button class="category-btn" onclick="filterTools('game')">æ¸¸æˆ</button>
                <button class="category-btn" onclick="filterTools('education')">æ•™è‚²å·¥å…·</button>
            </div>

            <!-- åŠ è½½çŠ¶æ€ -->
            <div class="loading" id="loadingIndicator" style="display: none;">
                <div class="spinner"></div>
                <p>æ­£åœ¨åŠ è½½å·¥å…·åˆ—è¡¨...</p>
            </div>

            <!-- çŠ¶æ€æ¶ˆæ¯ -->
            <div class="status-message" id="statusMessage"></div>

            <!-- å·¥å…·åˆ—è¡¨ -->
            <div class="tools-grid" id="toolsGrid">
                <!-- åŠ¨æ€ç”Ÿæˆå·¥å…·å¡ç‰‡ -->
            </div>

            <button class="refresh-btn" onclick="loadFiles()">
                ğŸ”„ åˆ·æ–°åˆ—è¡¨
            </button>
        </main>

        <footer>
            <p>Â© 2024 åœ¨çº¿å·¥å…·é›†åˆ | ä»“åº“: yunyufeng.github.io</p>
        </footer>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let allTools = [];
        let toolConfigs = {};
        let currentFilter = 'all';
        let currentSearch = '';

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadToolConfigs();
        });

        // åŠ è½½å·¥å…·é…ç½®
        async function loadToolConfigs() {
            try {
                const response = await fetch('tools-config.json');
                if (response.ok) {
                    toolConfigs = await response.json();
                    console.log('é…ç½®åŠ è½½æˆåŠŸ:', toolConfigs);
                } else {
                    console.log('ä½¿ç”¨é»˜è®¤é…ç½®');
                    toolConfigs = {};
                }
                
                // åŠ è½½æ–‡ä»¶
                loadFiles();
                
            } catch (error) {
                console.log('é…ç½®åŠ è½½å¤±è´¥:', error);
                toolConfigs = {};
                loadFiles();
            }
        }

        // åŠ è½½æ–‡ä»¶
        async function loadFiles() {
            const loadingIndicator = document.getElementById('loadingIndicator');
            const statusMessage = document.getElementById('statusMessage');
            const toolsGrid = document.getElementById('toolsGrid');

            loadingIndicator.style.display = 'block';
            statusMessage.style.display = 'none';
            statusMessage.className = 'status-message';
            toolsGrid.innerHTML = '';

            try {
                // ä»æ‚¨çš„GitHubä»“åº“è·å–æ–‡ä»¶
                const response = await fetch('https://api.github.com/repos/yunyufeng/yunyufeng.github.io/contents/');
                if (!response.ok) {
                    throw new Error(`GitHub APIé”™è¯¯: ${response.status}`);
                }

                const files = await response.json();
                
                // è¿‡æ»¤å‡ºHTMLæ–‡ä»¶å¹¶æ’é™¤index.html
                const htmlFiles = files.filter(file => 
                    file.name.endsWith('.html') && 
                    file.name !== 'index.html'
                );

                console.log('æ‰¾åˆ°HTMLæ–‡ä»¶:', htmlFiles);

                allTools = await Promise.all(
                    htmlFiles.map(async (file) => {
                        const config = toolConfigs[file.name] || {};
                        
                        return {
                            name: config.name || getDisplayName(file.name),
                            description: config.description || generateDescription(file.name),
                            icon: config.icon || getToolIcon(file.name),
                            url: file.name,
                            category: config.category || getCategory(file.name),
                            features: config.features || getFeatures(file.name),
                            status: config.status || getStatus(file.name),
                            size: file.size ? formatFileSize(file.size) : 'è‡ªåŠ¨è·å–',
                            lastModified: 'åˆšåˆš',
                            fileSize: file.size || 0,
                            featured: config.featured || false,
                            hasConfig: !!toolConfigs[file.name]
                        };
                    })
                );

                if (allTools.length > 0) {
                    displayTools(allTools);
                    showStatus(`æˆåŠŸåŠ è½½ ${allTools.length} ä¸ªå·¥å…·`, 'success');
                } else {
                    throw new Error('æ²¡æœ‰æ‰¾åˆ°HTMLå·¥å…·æ–‡ä»¶');
                }
                
            } catch (error) {
                console.log('GitHub APIå¤±è´¥:', error);
                // å¦‚æœAPIå¤±è´¥ï¼Œä½¿ç”¨å·²çŸ¥æ–‡ä»¶åˆ—è¡¨
                useKnownFiles();
            } finally {
                loadingIndicator.style.display = 'none';
            }
        }

        // ä½¿ç”¨å·²çŸ¥æ–‡ä»¶
        function useKnownFiles() {
            const knownFiles = [
                {
                    name: "PDFè½¬JPGè½¬æ¢å™¨",
                    description: "é«˜è´¨é‡çš„PDFè½¬JPGå›¾ç‰‡è½¬æ¢å·¥å…·ï¼Œæ”¯æŒ300DPIé«˜åˆ†è¾¨ç‡è¾“å‡º",
                    icon: "ğŸ“„â¡ï¸ğŸ–¼ï¸",
                    url: "PDFè½¬JPGè½¬æ¢å™¨.html",
                    category: "pdf",
                    features: ["PDFè½¬JPG", "300DPI", "é«˜è´¨é‡è¾“å‡º"],
                    status: "popular",
                    size: "è‡ªåŠ¨è·å–",
                    lastModified: "åˆšåˆš",
                    fileSize: 0,
                    featured: true,
                    hasConfig: false
                },
                {
                    name: "å°å­¦æ•°å­¦å¹³æ–¹åƒç±³å’Œå…¬é¡·çš„è®¤è¯†æ•™å­¦å·¥å…·",
                    description: "å°å­¦æ•°å­¦æ•™å­¦å·¥å…·ï¼Œå¸®åŠ©ç†è§£å…¬é¡·å’Œå¹³æ–¹åƒç±³çš„é¢ç§¯å•ä½æ¢ç®—",
                    icon: "ğŸ“ğŸ§®",
                    url: "å°å­¦æ•°å­¦å¹³æ–¹åƒç±³å’Œå…¬é¡·çš„è®¤è¯†æ•™å­¦å·¥å…·.html",
                    category: "education",
                    features: ["æ•°å­¦æ•™å­¦", "é¢ç§¯å•ä½", "æ•™è‚²å·¥å…·"],
                    status: "new",
                    size: "è‡ªåŠ¨è·å–",
                    lastModified: "åˆšåˆš",
                    fileSize: 0,
                    featured: false,
                    hasConfig: false
                },
                {
                    name: "æ‰«é›·æ¸¸æˆ",
                    description: "ç»å…¸æ‰«é›·æ¸¸æˆï¼Œè€ƒéªŒä½ çš„é€»è¾‘æ¨ç†èƒ½åŠ›",
                    icon: "ğŸ’£ğŸ®",
                    url: "æ‰«é›·æ¸¸æˆ.html",
                    category: "game",
                    features: ["æ‰«é›·æ¸¸æˆ", "ç»å…¸æ¸¸æˆ", "é€»è¾‘æ¨ç†"],
                    status: "popular",
                    size: "è‡ªåŠ¨è·å–",
                    lastModified: "åˆšåˆš",
                    fileSize: 0,
                    featured: true,
                    hasConfig: false
                }
            ];

            allTools = knownFiles;
            displayTools(allTools);
            showStatus('ä½¿ç”¨æœ¬åœ°å·¥å…·æ•°æ®', 'success');
        }

        // æ˜¾ç¤ºå·¥å…·åˆ—è¡¨
        function displayTools(toolsList) {
            const toolsGrid = document.getElementById('toolsGrid');
            const totalTools = document.getElementById('totalTools');
            const htmlFiles = document.getElementById('htmlFiles');
            
            totalTools.textContent = toolsList.length;
            htmlFiles.textContent = toolsList.length;
            
            if (!toolsList || toolsList.length === 0) {
                toolsGrid.innerHTML = `
                    <div class="no-tools">
                        <div class="no-tools-icon">ğŸ“</div>
                        <h3>æœªæ‰¾åˆ°HTMLæ–‡ä»¶</h3>
                        <p>å½“å‰ç›®å½•ä¸‹æ²¡æœ‰æ‰¾åˆ°ä»»ä½•HTMLæ–‡ä»¶</p>
                    </div>
                `;
                return;
            }

            toolsGrid.innerHTML = toolsList.map(tool => `
                <div class="tool-card ${tool.featured ? 'featured' : ''}">
                    <div class="tool-icon">${tool.icon}</div>
                    <div class="tool-info">
                        <div class="tool-name">
                            <a href="${tool.url}" onclick="openTool('${tool.url}'); return false;">${tool.name}</a>
                            ${tool.status ? `<span class="tool-status" style="background: ${
                                tool.status === 'new' ? '#4caf50' : 
                                tool.status === 'popular' ? '#ff9800' : '#9c27b0'
                            };">${
                                tool.status === 'new' ? 'æ–°' : 
                                tool.status === 'popular' ? 'çƒ­é—¨' : 
                                'æµ‹è¯•'
                            }</span>` : ''}
                        </div>
                        <div class="tool-description">${tool.description}</div>
                        <div class="tool-features">
                            ${tool.features.map(feature => `
                                <span class="feature-tag">${feature}</span>
                            `).join('')}
                        </div>
                        <div class="tool-actions">
                            <a href="${tool.url}" class="btn btn-primary" onclick="openTool('${tool.url}'); return false;">
                                <span>ğŸš€</span> ä½¿ç”¨å·¥å…·
                            </a>
                            <button class="btn btn-secondary" onclick="openConfig('${tool.url}')">
                                <span>âš™ï¸</span> é…ç½®
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // æ‰“å¼€å·¥å…·
        function openTool(toolUrl) {
            window.location.href = toolUrl;
        }

        // æ˜¾ç¤ºé…ç½®é¢æ¿
        function showConfigPanel() {
            const configPanel = document.getElementById('configPanel');
            configPanel.style.display = 'block';
        }

        // éšè—é…ç½®é¢æ¿
        function hideConfigPanel() {
            const configPanel = document.getElementById('configPanel');
            configPanel.style.display = 'none';
        }

        // æ‰“å¼€å·¥å…·é…ç½®
        function openConfig(toolUrl) {
            const tool = allTools.find(t => t.url === toolUrl);
            if (!tool) return;
            
            const configForm = document.getElementById('configForm');
            configForm.innerHTML = `
                <input type="hidden" id="configFile" value="${tool.url}">
                <div class="form-group">
                    <label>å·¥å…·æ–‡ä»¶å</label>
                    <input type="text" value="${tool.url}" readonly>
                </div>
                <div class="form-group">
                    <label>æ˜¾ç¤ºåç§°</label>
                    <input type="text" id="configName" value="${tool.name}" placeholder="è¾“å…¥å·¥å…·æ˜¾ç¤ºåç§°">
                </div>
                <div class="form-group">
                    <label>æè¿°</label>
                    <textarea id="configDescription" placeholder="è¾“å…¥å·¥å…·æè¿°">${tool.description}</textarea>
                </div>
                <div class="form-group">
                    <label>å›¾æ ‡</label>
                    <input type="text" id="configIcon" value="${tool.icon}" placeholder="è¾“å…¥è¡¨æƒ…ç¬¦å·å›¾æ ‡">
                </div>
                <div class="form-group">
                    <label>åˆ†ç±»</label>
                    <select id="configCategory">
                        <option value="pdf" ${tool.category === 'pdf' ? 'selected' : ''}>PDFå·¥å…·</option>
                        <option value="game" ${tool.category === 'game' ? 'selected' : ''}>æ¸¸æˆ</option>
                        <option value="education" ${tool.category === 'education' ? 'selected' : ''}>æ•™è‚²å·¥å…·</option>
                        <option value="other" ${tool.category === 'other' ? 'selected' : ''}>å…¶ä»–å·¥å…·</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ç‰¹æ€§æ ‡ç­¾ (ç”¨é€—å·åˆ†éš”)</label>
                    <input type="text" id="configFeatures" value="${tool.features.join(', ')}" placeholder="ä¾‹å¦‚: PDFè½¬JPG, 300DPI, é«˜è´¨é‡">
                </div>
                <div class="form-group">
                    <label>çŠ¶æ€</label>
                    <select id="configStatus">
                        <option value="">æ— </option>
                        <option value="new" ${tool.status === 'new' ? 'selected' : ''}>æ–°</option>
                        <option value="popular" ${tool.status === 'popular' ? 'selected' : ''}>çƒ­é—¨</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="configFeatured" ${tool.featured ? 'checked' : ''}>
                        æ ‡è®°ä¸ºçƒ­é—¨å·¥å…·
                    </label>
                </div>
                <div class="config-actions">
                    <button type="button" class="save-config" onclick="saveConfig()">ä¿å­˜é…ç½®</button>
                    <button type="button" class="cancel-config" onclick="hideConfigPanel()">å–æ¶ˆ</button>
                </div>
            `;
            
            showConfigPanel();
        }

        // ä¿å­˜é…ç½®
        function saveConfig() {
            try {
                const toolFile = document.getElementById('configFile').value;
                const config = {
                    name: document.getElementById('configName').value,
                    description: document.getElementById('configDescription').value,
                    icon: document.getElementById('configIcon').value,
                    category: document.getElementById('configCategory').value,
                    features: document.getElementById('configFeatures').value
                        .split(',')
                        .map(f => f.trim())
                        .filter(f => f),
                    status: document.getElementById('configStatus').value,
                    featured: document.getElementById('configFeatured').checked
                };
                
                // æ›´æ–°å·¥å…·é…ç½®
                toolConfigs[toolFile] = config;
                
                // ä¿å­˜åˆ°localStorage
                localStorage.setItem('toolConfigs', JSON.stringify(toolConfigs));
                
                // é‡æ–°åŠ è½½å·¥å…·
                loadFiles();
                
                hideConfigPanel();
                
                showStatus('é…ç½®ä¿å­˜æˆåŠŸ', 'success');
                
            } catch (error) {
                console.error('ä¿å­˜é…ç½®å¤±è´¥:', error);
                showStatus('ä¿å­˜å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æœç´¢å·¥å…·
        function searchTools() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            currentSearch = searchTerm;
            
            if (!searchTerm) {
                filterTools(currentFilter);
                return;
            }
            
            const filteredTools = allTools.filter(tool => 
                tool.name.toLowerCase().includes(searchTerm) ||
                tool.description.toLowerCase().includes(searchTerm) ||
                tool.features.some(feature => feature.toLowerCase().includes(searchTerm))
            );
            
            displayTools(filteredTools);
        }

        // è¿‡æ»¤å·¥å…·
        function filterTools(filter) {
            currentFilter = filter;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            let filteredTools = allTools.filter(tool => {
                if (filter === 'all') return true;
                if (filter === 'popular') return tool.featured || tool.status === 'popular';
                if (filter === 'pdf') return tool.category === 'pdf';
                if (filter === 'game') return tool.category === 'game';
                if (filter === 'education') return tool.category === 'education';
                return tool.category === filter;
            });
            
            displayTools(filteredTools);
        }

        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(message, type = 'info') {
            const statusMessage = document.getElementById('statusMessage');
            statusMessage.textContent = message;
            statusMessage.className = `status-message status-${type}`;
            statusMessage.style.display = 'block';
            
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 3000);
        }

        // å·¥å…·è¾…åŠ©å‡½æ•°
        function getDisplayName(filename) {
            return filename.replace('.html', '').replace('.htm', '');
        }

        function generateDescription(filename) {
            const name = filename.toLowerCase();
            if (name.includes('pdf') && name.includes('jpg')) {
                return 'ä¸“ä¸šçš„PDFè½¬JPGå›¾ç‰‡è½¬æ¢å·¥å…·ï¼Œæ”¯æŒé«˜åˆ†è¾¨ç‡è¾“å‡ºå’Œæ‰¹é‡å¤„ç†';
            } else if (name.includes('æ•°å­¦') || name.includes('å…¬é¡·')) {
                return 'å°å­¦æ•°å­¦æ•™å­¦å·¥å…·ï¼Œå¸®åŠ©ç†è§£å…¬é¡·å’Œå¹³æ–¹åƒç±³çš„é¢ç§¯å•ä½æ¢ç®—';
            } else if (name.includes('æ‰«é›·')) {
                return 'ç»å…¸æ‰«é›·æ¸¸æˆï¼Œè€ƒéªŒä½ çš„é€»è¾‘æ¨ç†èƒ½åŠ›';
            } else {
                return 'å®ç”¨çš„åœ¨çº¿å·¥å…·ï¼Œç‚¹å‡»å³å¯ä½¿ç”¨';
            }
        }

        function getToolIcon(filename) {
            const name = filename.toLowerCase();
            if (name.includes('pdf') && name.includes('jpg')) {
                return 'ğŸ“„â¡ï¸ğŸ–¼ï¸';
            } else if (name.includes('æ•°å­¦') || name.includes('å…¬é¡·')) {
                return 'ğŸ“ğŸ§®';
            } else if (name.includes('æ‰«é›·')) {
                return 'ğŸ’£ğŸ®';
            } else {
                return 'ğŸ› ï¸';
            }
        }

        function getCategory(filename) {
            const name = filename.toLowerCase();
            if (name.includes('pdf')) return 'pdf';
            if (name.includes('æ‰«é›·')) return 'game';
            if (name.includes('æ•°å­¦') || name.includes('å…¬é¡·')) return 'education';
            return 'other';
        }

        function getFeatures(filename) {
            const name = filename.toLowerCase();
            if (name.includes('pdf') && name.includes('jpg')) {
                return ['PDFè½¬JPG', 'é«˜è´¨é‡', 'æ‰¹é‡å¤„ç†'];
            } else if (name.includes('æ•°å­¦') || name.includes('å…¬é¡·')) {
                return ['æ•°å­¦æ•™å­¦', 'é¢ç§¯å•ä½', 'æ•™è‚²å·¥å…·'];
            } else if (name.includes('æ‰«é›·')) {
                return ['æ‰«é›·æ¸¸æˆ', 'ç»å…¸æ¸¸æˆ', 'é€»è¾‘æ¨ç†'];
            } else {
                return ['åœ¨çº¿å·¥å…·'];
            }
        }

        function getStatus(filename) {
            const name = filename.toLowerCase();
            if (name.includes('pdf') && name.includes('jpg')) return 'popular';
            if (name.includes('æ‰«é›·')) return 'popular';
            return null;
        }

        function formatFileSize(bytes) {
            if (!bytes) return 'æœªçŸ¥';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
